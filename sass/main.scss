/* Welcome to Compass.
 * In this file you should write your main styles. (or centralize your imports)
 * Import this file using the following HTML or equivalent:
 * <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css" /> */

@import "compass/reset";
@import "compass/typography/links/link-colors";
@import "compass/css3/font-face";

// style variables

$darkRed: #ce0c17;
$fontSize: 18px;
$boxSize: 30px;
$boxBorderSize: 2px;
$defaultMargin: 50px;

// positioning variables

$box1_x: 1000px;
$box2_x: 1500px;
$box3_x: 2000px;
$box_y: 190px;

// animation variables

$animStart: 2s; // first animation starts after $animStart seconds
$animDurationToMoveOriginalTextToBoxes: 2s;
$animDurationToMakeArrowsDisappear: 1s;
$animDurationToRunAndJump: 3s; // 2s run, 1s jump
$animDurationToExpandBox: 2s;

// special fonts

@include font-face("Solex", font-files("solexreg-webfont.woff"));
$font-family: "Solex";
@include font-face("JandA", font-files("jandasafeandsoundsolid-webfont.woff"));
$font-family: "JandA";

body {
  font-family: "Solex";
  color: #777472;
  font-size: $fontSize;
  position: relative;
}

a {
  @include link-colors($darkRed, $darkRed, $darkRed, $darkRed, $darkRed);
}

header {
  background: url("../images/header.png");
  width: image-width("header.png");
  height: image-height("header.png");
}

h1 {
  font-family: "JandA";
  color: $darkRed;
  font-size: 21px;
  margin: 0 0 1em 0;
}

ul {
  list-style: none;
  margin-left: 0;
  padding-left: 0;
}

li {
  padding-left: 1em;
  text-indent: -1em;
  line-height: 1.5em;

    &:before {
      content: "â€¢";
      padding-right: 5px;
      color: $darkRed;
    }
}

#requirements,
#profile,
#job,
#application {
  -webkit-animation-delay: $animStart;
  -webkit-animation-duration: $animDurationToMoveOriginalTextToBoxes;
  -webkit-animation-fill-mode: both;

  /* this is dumb, but it seems impossible to animate anything else than absolute positionned elements */
  position: absolute;
}

#requirements {
  background: #f2f1ec; // match PDF file
  width: image-width("header.png");
  height: 600px; // arbitrary
  top: image-height("header.png");
}

#profile,
#job,
#application {
  left: 80px; // match PDF file
}

@mixin moveToBoxAnimation($name, $x) {
    @-webkit-keyframes $name {
      75% {
        opacity: 1;
      }
      to {
        font-size: 0;
        opacity: 0;
        top: -160px; // TBD
        left: $x;
      }
    }
}

#profile {
  top: $defaultMargin; // relative to #requirements
  -webkit-animation-name: moveToBox1;
}
@include moveToBoxAnimation("moveToBox1", $box1_x);

#job {
  top: 304px; /* #profile's top + #profile's height + margin = $defaultMargin + 204px + $defaultMargin */
  -webkit-animation-name: moveToBox2;
}
@include moveToBoxAnimation("moveToBox2", $box2_x);

#application {
  top: 504px; /* #job's top + #job's height + margin = 304px + 150px + $defaultMargin */
  -webkit-animation-name: moveToBox3;
}
@include moveToBoxAnimation("moveToBox3", $box3_x);

#requirements {
  -webkit-animation-name: grass;
}

@-webkit-keyframes grass {
  to {
    background: green;
    height: 100px; // arbitrary
    width: 2300px; // arbitrary
    top: 353px; // to more or less touch the feet of the people in header.png
  }
}

.box {
  border: $boxBorderSize solid black;
  border-radius: 5px;
  background: #ffc70c;
  color: black;
  width: $boxSize;
  line-height: $boxSize;
  text-align: center;
  font-size: $boxSize;
  position: absolute;
  top: $box_y;
}

#box1 {
  left: $box1_x;
}

#box2 {
  left: $box2_x;
}

#box3 {
  left: $box3_x;
}

#arrows {
  width: image-width("arrows.png");
  height: image-height("arrows.png");
  background-image: url("../images/arrows.png");
  position: absolute;
  top: 208px;
  left: 756px;

  -webkit-animation-delay: $animStart + $animDurationToMoveOriginalTextToBoxes;
  -webkit-animation-duration: $animDurationToMakeArrowsDisappear;
  -webkit-animation-fill-mode: both;
  -webkit-animation-name: disappear;
}

@-webkit-keyframes disappear {
  to {
    opacity: 0;
  }
}

/*
#manu {
width: 50px;
height: 72px;
background-image: url("../images/sprite.png");

-webkit-animation: play .8s steps(10) infinite;
}

@-webkit-keyframes play {
from { background-position:    0px; }
to { background-position: -500px; }
}
*/
#manu {
  width: image-width("manu.png");
  height: image-height("manu.png");
  background-image: url("../images/manu.png");
  position: absolute;
}

#manu {
  -webkit-animation-delay: $animStart + $animDurationToMoveOriginalTextToBoxes + $animDurationToMakeArrowsDisappear;
  -webkit-animation-duration: $animDurationToRunAndJump;
  -webkit-animation-fill-mode: both;
  -webkit-animation-name: jumpnrun;
}

@-webkit-keyframes jumpnrun {
  from {
    top: 261px;
    left: 758px;
  }
  /* run for 2/3 of the time */
  66% {
    top: 261px;
    left: 985px; /* TBD */
  }
  /* jump */
  82% {
    top: 227px;
    left: 985px; /* TBD */
  }
  to {
    top: 261px;
    left: 985px; /* TBD */
  }
}

@-webkit-keyframes jumpnrun2 {
  from {
    top: 261px;
    left: 985px;
  }
  /* run for 2/3 of the time */
  66% {
    top: 261px;
    left: 1485px; /* TBD */
  }
  /* jump */
  82% {
    top: 227px;
    left: 1485px; /* TBD */
  }
  to {
    top: 261px;
    left: 1485px; /* TBD */
  }
}

/* blow up box1 */
#box1 {
  -webkit-animation-delay: $animStart + $animDurationToMoveOriginalTextToBoxes + $animDurationToMakeArrowsDisappear + $animDurationToRunAndJump;
  -webkit-animation-duration: $animDurationToExpandBox;
  -webkit-animation-fill-mode: both;
  -webkit-animation-name: expand;
}

@-webkit-keyframes expand {
  from {
    width: $boxSize;
    height: $boxSize;
  }
  to {
    top: 10px;
    left: 765px; /* #box1's left - 1/2 this width + 1/2 .box width = $box1_x - 250px + 15px */
    width: 500px;
    height: 170px; /* .box's top - this top + .box's height - .expanded's padding = $box_y - 10px + 30px - 40px */
  }
}

@-webkit-keyframes shrink {
  /* reverse from expand */
  from {
    top: 10px;
    left: 765px; 
    width: 500px;
    height: 170px; 
  }
  to {
    width: $boxSize;
    height: $boxSize;
  }
}

#box1.expanded {
  font-size: $fontSize;
  text-align: left;
  overflow-y: scroll;
  padding: 20px;
}